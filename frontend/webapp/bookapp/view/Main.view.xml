<mvc:View
        controllerName="bookapp.controller.Main"
        xmlns:mvc="sap.ui.core.mvc"
        xmlns="sap.m"
        xmlns:core="sap.ui.core">

    <Page id="page" title="Book Management System" class="sapUiResponsiveMargin">
        <content>
            <!-- Header with action buttons -->
            <Bar class="sapUiMediumMargin">
                <contentLeft>
                    <Title text="Book Library" level="H2"/>
                </contentLeft>
                <contentRight>
                    <Button id="addBookBtn" text="Add New Book" type="Emphasized"
                            icon="sap-icon://add" press="onAddBook"/>
                    <Button id="refreshBtn" text="Refresh" icon="sap-icon://refresh"
                            press="onRefresh"/>
                </contentRight>
            </Bar>

            <!-- Search and Filter Controls -->
            <Panel headerText="Search &amp; Filter" expandable="true" expanded="true"
                   class="sapUiResponsiveMargin">
                <content>
                    <VBox class="sapUiMediumMargin">
                        <HBox class="sapUiTinyMargin">
                            <SearchField id="searchField" width="300px"
                                         placeholder="Search by title or author..."
                                         search="onSearch" value="{/searchQuery}"/>
                            <Button text="Clear" press="onClearSearch" class="sapUiTinyMarginBegin"/>
                        </HBox>
                        <HBox class="sapUiTinyMargin">
                            <Label text="Filter by Author:" class="sapUiTinyMarginEnd"/>
                            <ComboBox id="authorFilter" width="200px"
                                      items="{/authors}"
                                      selectedKey="{/selectedAuthor}"
                                      selectionChange="onAuthorFilter">
                                <core:Item key="{key}" text="{text}"/>
                            </ComboBox>
                        </HBox>
                    </VBox>
                </content>
            </Panel>

            <!-- Books Table -->
            <Table id="booksTable"
                   items="{/books}"
                   growing="true"
                   growingThreshold="20"
                   mode="MultiSelect"
                   class="sapUiResponsiveMargin">
                <headerToolbar>
                    <OverflowToolbar>
                        <Title text="Books ({/totalBooks})"/>
                        <ToolbarSpacer/>
                        <Button id="deleteSelectedBtn" text="Delete Selected"
                                icon="sap-icon://delete" type="Transparent"
                                enabled="{= ${/selectedBooks}.length > 0}"
                                press="onDeleteSelected"/>
                    </OverflowToolbar>
                </headerToolbar>

                <columns>
                    <Column width="12em">
                        <Text text="Title"/>
                    </Column>
                    <Column width="12em">
                        <Text text="Author"/>
                    </Column>
                    <Column width="10em">
                        <Text text="Created Date"/>
                    </Column>
                    <Column width="8em">
                        <Text text="Created By"/>
                    </Column>
                    <Column width="8em">
                        <Text text="Actions"/>
                    </Column>
                </columns>

                <items>
                    <ColumnListItem press="onBookPress" type="Navigation">
                        <cells>
                            <Text text="{title}" maxLines="2"/>
                            <Text text="{author}"/>
                            <Text text="{ path: 'created_on', formatter: '.formatCreatedOn' }"/>
                            <Text text="{created_by}"/>
                            <HBox>
                                <Button icon="sap-icon://edit" type="Transparent"
                                        tooltip="Edit Book" press="onEditBook"/>
                                <Button icon="sap-icon://delete" type="Transparent"
                                        tooltip="Delete Book" press="onDeleteBook"/>
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>

            <!-- Loading indicator -->
            <BusyIndicator id="loadingIndicator" visible="{/loading}" size="2rem"/>

            <!-- No data message -->
            <MessageStrip id="noDataMessage"
                          text="No books found. Click 'Add New Book' to get started."
                          type="Information"
                          visible="{= ${/books}.length === 0 &amp;&amp; !${/loading}}"
                                     class="sapUiMediumMargin"/>
        </content>
    </Page>
</mvc:View>